---
import Logo from "@/components/header/Logo.astro";
import DesktopNav from "@/components/header/DesktopNav.astro";
import MobileNav from "@/components/header/MobileNav.astro";
import SearchOverlay from "@/components/header/SearchOverlay.astro";
import HeaderActions from "@/components/header/HeaderActions.astro";
import HeaderScript from "@/components/header/HeaderScript.astro";
import HeaderStyle from "@/components/header/HeaderStyle.astro";
import ThemeToggle from "@/components/ThemeToggle.astro";
---

<header
  id="college-header"
  class="bg-background/95 supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50 w-full border-b backdrop-blur transition-all duration-300"
>
  <div
    class="container flex h-20 items-center justify-between transition-all duration-300"
  >
    <!-- Logo and Brand -->
    <div class="flex items-center gap-2">
      <a href="/" class="flex items-center gap-3 group">
        <div class="rounded-full bg-primary/10 p-2 transition-all duration-300 group-hover:bg-primary/20 group-hover:scale-105">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 text-primary transition-transform duration-500 ease-out group-hover:rotate-12"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
        </div>
        <div class="flex flex-col">
          <span class="text-lg font-bold tracking-tight leading-none">DCCP Baguio</span>
          <span class="text-xs text-muted-foreground hidden sm:inline-block">Excellence in Education</span>
        </div>
      </a>
    </div>

    <!-- Desktop Navigation -->
    <div class="hidden lg:flex items-center justify-end space-x-1">
      <nav class="flex items-center">
        <!-- Main Navigation Links -->
        <div class="nav-links flex items-center space-x-1">
          <a href="#about" class="nav-link px-3 py-2 text-sm font-medium rounded-md transition-all duration-300 hover:bg-accent/50 hover:text-primary relative overflow-hidden">
            About
            <span class="nav-indicator absolute bottom-0 left-0 w-full h-0.5 bg-primary scale-x-0 transition-transform duration-300 origin-left"></span>
          </a>

          <!-- Programs Dropdown -->
          <div class="relative group">
            <button class="nav-link px-3 py-2 text-sm font-medium rounded-md transition-all duration-300 hover:bg-accent/50 hover:text-primary flex items-center gap-1 relative overflow-hidden">
              Programs
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 transition-transform duration-300 group-hover:rotate-180"><polyline points="6 9 12 15 18 9"></polyline></svg>
              <span class="nav-indicator absolute bottom-0 left-0 w-full h-0.5 bg-primary scale-x-0 transition-transform duration-300 origin-left"></span>
            </button>
            <div class="absolute left-0 mt-1 w-56 opacity-0 translate-y-2 pointer-events-none bg-card rounded-md border shadow-md transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0 group-hover:pointer-events-auto z-50">
              <div class="p-2 space-y-1">
                <a href="#undergraduate" class="block px-3 py-2 text-sm rounded-md transition-colors hover:bg-accent hover:text-primary">
                  Undergraduate Programs
                </a>
                <a href="#graduate" class="block px-3 py-2 text-sm rounded-md transition-colors hover:bg-accent hover:text-primary">
                  Graduate Programs
                </a>
                <a href="#certificate" class="block px-3 py-2 text-sm rounded-md transition-colors hover:bg-accent hover:text-primary">
                  Certificate Courses
                </a>
                <a href="#online" class="block px-3 py-2 text-sm rounded-md transition-colors hover:bg-accent hover:text-primary">
                  Online Learning
                </a>
              </div>
            </div>
          </div>

          <!-- Facilities Dropdown -->
          <div class="relative group">
            <button class="nav-link px-3 py-2 text-sm font-medium rounded-md transition-all duration-300 hover:bg-accent/50 hover:text-primary flex items-center gap-1 relative overflow-hidden">
              Facilities
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 transition-transform duration-300 group-hover:rotate-180"><polyline points="6 9 12 15 18 9"></polyline></svg>
              <span class="nav-indicator absolute bottom-0 left-0 w-full h-0.5 bg-primary scale-x-0 transition-transform duration-300 origin-left"></span>
            </button>
            <div class="absolute left-0 mt-1 w-56 opacity-0 translate-y-2 pointer-events-none bg-card rounded-md border shadow-md transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0 group-hover:pointer-events-auto z-50">
              <div class="p-2 space-y-1">
                <a href="#library" class="block px-3 py-2 text-sm rounded-md transition-colors hover:bg-accent hover:text-primary">
                  Library & Learning Center
                </a>
                <a href="#labs" class="block px-3 py-2 text-sm rounded-md transition-colors hover:bg-accent hover:text-primary">
                  Laboratories
                </a>
                <a href="#sports" class="block px-3 py-2 text-sm rounded-md transition-colors hover:bg-accent hover:text-primary">
                  Sports Facilities
                </a>
                <a href="#campus" class="block px-3 py-2 text-sm rounded-md transition-colors hover:bg-accent hover:text-primary">
                  Campus Tour
                </a>
              </div>
            </div>
          </div>

          <a href="#testimonials" class="nav-link px-3 py-2 text-sm font-medium rounded-md transition-all duration-300 hover:bg-accent/50 hover:text-primary relative overflow-hidden">
            Testimonials
            <span class="nav-indicator absolute bottom-0 left-0 w-full h-0.5 bg-primary scale-x-0 transition-transform duration-300 origin-left"></span>
          </a>

          <a href="#admissions" class="nav-link px-3 py-2 text-sm font-medium rounded-md transition-all duration-300 hover:bg-accent/50 hover:text-primary relative overflow-hidden">
            Admissions
            <span class="nav-indicator absolute bottom-0 left-0 w-full h-0.5 bg-primary scale-x-0 transition-transform duration-300 origin-left"></span>
          </a>

          <a href="#contact" class="nav-link px-3 py-2 text-sm font-medium rounded-md transition-all duration-300 hover:bg-accent/50 hover:text-primary relative overflow-hidden">
            Contact
            <span class="nav-indicator absolute bottom-0 left-0 w-full h-0.5 bg-primary scale-x-0 transition-transform duration-300 origin-left"></span>
          </a>

          <a href="/dccp-hub" class="nav-link px-3 py-2 text-sm font-medium rounded-md transition-all duration-300 hover:bg-accent/50 hover:text-primary relative overflow-hidden">
            <span class="flex items-center gap-1">
              DCCPHub
              <div class="h-1.5 w-1.5 rounded-full bg-primary animate-pulse"></div>
            </span>
            <span class="nav-indicator absolute bottom-0 left-0 w-full h-0.5 bg-primary scale-x-0 transition-transform duration-300 origin-left"></span>
          </a>
        </div>

        <!-- Action Buttons -->
        <div class="ml-4 flex items-center space-x-2">
          <!-- Search Button -->
          <button id="search-button" class="p-2 rounded-md text-muted-foreground hover:text-foreground hover:bg-accent/50 transition-colors duration-300">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>
            <span class="sr-only">Search</span>
          </button>

          <!-- Apply Now Button -->
          <a
            href="#admissions"
            class="apply-button relative overflow-hidden group px-4 py-2 rounded-md bg-primary text-primary-foreground hover:bg-primary/90 transition-all duration-300 text-sm font-medium"
          >
            <span class="relative z-10">Apply Now</span>
            <span class="absolute inset-0 bg-primary-foreground/10 scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"></span>
          </a>

          <!-- Theme Toggle -->
          <ThemeToggle />
        </div>
      </nav>
    </div>

    <!-- Mobile Menu Button -->
    <div class="lg:hidden flex items-center gap-2">
      <button id="search-button-mobile" class="p-2 rounded-md text-muted-foreground hover:text-foreground hover:bg-accent/50 transition-colors duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>
        <span class="sr-only">Search</span>
      </button>

      <button id="mobile-menu-button" class="p-2 rounded-md hover:bg-accent/50 transition-colors duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
        <span class="sr-only">Menu</span>
      </button>
    </div>
  </div>

  <!-- Search Overlay (hidden by default) -->
  <div id="search-overlay" class="fixed inset-0 bg-background/80 backdrop-blur-sm z-50 hidden">
    <div class="container flex items-center justify-center h-full max-w-lg mx-auto">
      <div class="w-full bg-card rounded-lg shadow-lg border p-6 scale-95 opacity-0 transition-all duration-300" id="search-container">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-lg font-medium">Search</h3>
          <button id="close-search" class="p-1 rounded-md hover:bg-accent/50 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
            <span class="sr-only">Close</span>
          </button>
        </div>
        <div class="relative">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>
          <input type="text" placeholder="Search for programs, facilities..." class="w-full pl-10 pr-4 py-2 rounded-md border bg-background focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all">
        </div>
        <div class="mt-4">
          <p class="text-sm text-muted-foreground">Popular searches:</p>
          <div class="flex flex-wrap gap-2 mt-2">
            <a href="#admissions" class="text-xs px-2 py-1 rounded-md bg-accent hover:bg-accent/80 transition-colors">Admissions</a>
            <a href="#programs" class="text-xs px-2 py-1 rounded-md bg-accent hover:bg-accent/80 transition-colors">Computer Science</a>
            <a href="#facilities" class="text-xs px-2 py-1 rounded-md bg-accent hover:bg-accent/80 transition-colors">Library</a>
            <a href="#contact" class="text-xs px-2 py-1 rounded-md bg-accent hover:bg-accent/80 transition-colors">Contact</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Mobile Menu (hidden by default) -->
  <div id="mobile-menu" class="fixed inset-0 z-40 lg:hidden hidden">
    <div class="fixed inset-0 bg-background/80 backdrop-blur-sm" id="mobile-backdrop"></div>

    <div class="fixed inset-y-0 right-0 w-full max-w-sm bg-background border-l shadow-xl transition-transform duration-300 translate-x-full" id="mobile-container">
      <div class="flex flex-col h-full overflow-y-auto">
        <!-- Mobile Menu Header -->
        <div class="sticky top-0 z-10 flex items-center justify-between px-4 py-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
          <div class="flex items-center gap-2">
            <div class="rounded-full bg-primary/10 p-1.5">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-primary"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
            </div>
            <span class="text-sm font-medium">DCCP Baguio</span>
          </div>
          <button id="close-mobile-menu" class="p-2 rounded-md hover:bg-accent/50 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
            <span class="sr-only">Close menu</span>
          </button>
        </div>

        <!-- Mobile Menu Content -->
        <div class="flex-1 px-4 py-6 space-y-6">
          <!-- Main Navigation Links -->
          <nav class="space-y-1.5">
            <a href="#about" class="mobile-nav-link flex items-center gap-2 px-3 py-2.5 rounded-md hover:bg-accent/50 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 text-primary"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
              <span>About</span>
            </a>

            <!-- Programs Collapsible -->
            <div class="mobile-collapsible">
              <button class="mobile-collapsible-trigger flex items-center justify-between w-full px-3 py-2.5 rounded-md hover:bg-accent/50 transition-colors">
                <div class="flex items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 text-primary"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
                  <span>Programs</span>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 transition-transform duration-200"><polyline points="6 9 12 15 18 9"></polyline></svg>
              </button>
              <div class="mobile-collapsible-content hidden pl-9 pr-3 pb-1 pt-1 space-y-1">
                <a href="#undergraduate" class="block px-3 py-2 text-sm rounded-md hover:bg-accent/50 transition-colors">
                  Undergraduate Programs
                </a>
                <a href="#graduate" class="block px-3 py-2 text-sm rounded-md hover:bg-accent/50 transition-colors">
                  Graduate Programs
                </a>
                <a href="#certificate" class="block px-3 py-2 text-sm rounded-md hover:bg-accent/50 transition-colors">
                  Certificate Courses
                </a>
                <a href="#online" class="block px-3 py-2 text-sm rounded-md hover:bg-accent/50 transition-colors">
                  Online Learning
                </a>
              </div>
            </div>

            <!-- Facilities Collapsible -->
            <div class="mobile-collapsible">
              <button class="mobile-collapsible-trigger flex items-center justify-between w-full px-3 py-2.5 rounded-md hover:bg-accent/50 transition-colors">
                <div class="flex items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 text-primary"><path d="M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z"/><path d="m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9"/><path d="M12 3v6"/></svg>
                  <span>Facilities</span>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 transition-transform duration-200"><polyline points="6 9 12 15 18 9"></polyline></svg>
              </button>
              <div class="mobile-collapsible-content hidden pl-9 pr-3 pb-1 pt-1 space-y-1">
                <a href="#library" class="block px-3 py-2 text-sm rounded-md hover:bg-accent/50 transition-colors">
                  Library & Learning Center
                </a>
                <a href="#labs" class="block px-3 py-2 text-sm rounded-md hover:bg-accent/50 transition-colors">
                  Laboratories
                </a>
                <a href="#sports" class="block px-3 py-2 text-sm rounded-md hover:bg-accent/50 transition-colors">
                  Sports Facilities
                </a>
                <a href="#campus" class="block px-3 py-2 text-sm rounded-md hover:bg-accent/50 transition-colors">
                  Campus Tour
                </a>
              </div>
            </div>

            <a href="#testimonials" class="mobile-nav-link flex items-center gap-2 px-3 py-2.5 rounded-md hover:bg-accent/50 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 text-primary"><path d="M17 6.1H3"/><path d="M21 12.1H3"/><path d="M15.1 18H3"/></svg>
              <span>Testimonials</span>
            </a>

            <a href="#admissions" class="mobile-nav-link flex items-center gap-2 px-3 py-2.5 rounded-md hover:bg-accent/50 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 text-primary"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
              <span>Admissions</span>
            </a>

            <a href="#contact" class="mobile-nav-link flex items-center gap-2 px-3 py-2.5 rounded-md hover:bg-accent/50 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 text-primary"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
              <span>Contact</span>
            </a>

            <a href="/dccp-hub" class="mobile-nav-link flex items-center gap-2 px-3 py-2.5 rounded-md hover:bg-accent/50 transition-colors bg-primary/5">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 text-primary"><path d="M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6"></path><path d="m21 3-9 9"></path><path d="M15 3h6v6"></path></svg>
              <div class="flex items-center gap-1">
                <span>DCCPHub</span>
                <div class="h-1.5 w-1.5 rounded-full bg-primary animate-pulse"></div>
              </div>
            </a>
          </nav>

          <!-- Mobile Action Buttons -->
          <div class="space-y-3 pt-4 border-t">
            <a href="#admissions" class="flex items-center justify-center gap-2 w-full py-2.5 rounded-md bg-primary text-primary-foreground hover:bg-primary/90 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
              <span>Apply Now</span>
            </a>

            <div class="flex items-center justify-between px-3 py-2 rounded-md bg-accent/50">
              <span class="text-sm">Switch Theme</span>
              <button id="mobile-theme-toggle" class="p-2 rounded-md hover:bg-accent transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 dark:hidden"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 hidden dark:block"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
                <span class="sr-only">Toggle theme</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Mobile Menu Footer -->
        <div class="border-t px-4 py-4">
          <div class="flex items-center justify-between">
            <div class="text-xs text-muted-foreground">
              <p>Â© 2023 DCCP Baguio</p>
            </div>
            <div class="flex items-center space-x-3">
              <a href="#" class="text-muted-foreground hover:text-foreground transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
                <span class="sr-only">Facebook</span>
              </a>
              <a href="#" class="text-muted-foreground hover:text-foreground transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
                <span class="sr-only">Instagram</span>
              </a>
              <a href="#" class="text-muted-foreground hover:text-foreground transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"/></svg>
                <span class="sr-only">Twitter</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Elements
    const header = document.getElementById('college-header');
    const navLinks = document.querySelectorAll('.nav-link');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const closeMobileMenuButton = document.getElementById('close-mobile-menu');
    const mobileMenu = document.getElementById('mobile-menu');
    const mobileContainer = document.getElementById('mobile-container');
    const mobileBackdrop = document.getElementById('mobile-backdrop');
    const mobileCollapsibles = document.querySelectorAll('.mobile-collapsible');
    const searchButton = document.getElementById('search-button');
    const searchButtonMobile = document.getElementById('search-button-mobile');
    const searchOverlay = document.getElementById('search-overlay');
    const searchContainer = document.getElementById('search-container');
    const closeSearchButton = document.getElementById('close-search');

    // Scroll effect for header
    let lastScrollY = window.scrollY;

    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        header.classList.add('shadow-sm');
        header.classList.add('h-16');
        header.classList.remove('h-20');
      } else {
        header.classList.remove('shadow-sm');
        header.classList.remove('h-16');
        header.classList.add('h-20');
      }

      // Show/hide header on scroll direction
      if (window.scrollY > lastScrollY && window.scrollY > 150) {
        header.style.transform = 'translateY(-100%)';
      } else {
        header.style.transform = 'translateY(0)';
      }
      lastScrollY = window.scrollY;
    });

    // Desktop nav link hover effect
    navLinks.forEach(link => {
      link.addEventListener('mouseenter', () => {
        const indicator = link.querySelector('.nav-indicator');
        if (indicator) {
          indicator.style.transform = 'scaleX(1)';
        }
      });

      link.addEventListener('mouseleave', () => {
        const indicator = link.querySelector('.nav-indicator');
        if (indicator) {
          indicator.style.transform = 'scaleX(0)';
        }
      });
    });

    // Mobile menu functionality
    function openMobileMenu() {
      if (mobileMenu && mobileContainer) {
        document.body.style.overflow = 'hidden';
        mobileMenu.classList.remove('hidden');
        // Trigger animation after a small delay
        setTimeout(() => {
          mobileContainer.style.transform = 'translateX(0)';
          mobileBackdrop.style.opacity = '1';
        }, 10);
      }
    }

    function closeMobileMenu() {
      if (mobileMenu && mobileContainer) {
        mobileContainer.style.transform = 'translateX(100%)';
        mobileBackdrop.style.opacity = '0';
        // Wait for animation to complete before hiding
        setTimeout(() => {
          mobileMenu.classList.add('hidden');
          document.body.style.overflow = '';
        }, 300);
      }
    }

    if (mobileMenuButton) {
      mobileMenuButton.addEventListener('click', openMobileMenu);
    }

    if (closeMobileMenuButton) {
      closeMobileMenuButton.addEventListener('click', closeMobileMenu);
    }

    if (mobileBackdrop) {
      mobileBackdrop.addEventListener('click', closeMobileMenu);
    }

    // Mobile collapsible functionality
    mobileCollapsibles.forEach(collapsible => {
      const trigger = collapsible.querySelector('.mobile-collapsible-trigger');
      const content = collapsible.querySelector('.mobile-collapsible-content');
      const icon = trigger.querySelector('svg:last-child');

      trigger.addEventListener('click', () => {
        content.classList.toggle('hidden');
        if (!content.classList.contains('hidden')) {
          icon.style.transform = 'rotate(180deg)';
        } else {
          icon.style.transform = 'rotate(0)';
        }
      });
    });

    // Search functionality
    function openSearch() {
      if (searchOverlay && searchContainer) {
        document.body.style.overflow = 'hidden';
        searchOverlay.classList.remove('hidden');
        // Trigger animation after a small delay
        setTimeout(() => {
          searchContainer.style.opacity = '1';
          searchContainer.style.transform = 'scale(1)';
        }, 10);
      }
    }

    function closeSearch() {
      if (searchOverlay && searchContainer) {
        searchContainer.style.opacity = '0';
        searchContainer.style.transform = 'scale(0.95)';
        // Wait for animation to complete before hiding
        setTimeout(() => {
          searchOverlay.classList.add('hidden');
          document.body.style.overflow = '';
        }, 300);
      }
    }

    if (searchButton) {
      searchButton.addEventListener('click', openSearch);
    }

    if (searchButtonMobile) {
      searchButtonMobile.addEventListener('click', openSearch);
    }

    if (closeSearchButton) {
      closeSearchButton.addEventListener('click', closeSearch);
    }

    if (searchOverlay) {
      searchOverlay.addEventListener('click', (e) => {
        if (e.target === searchOverlay) {
          closeSearch();
        }
      });
    }

    // Close mobile menu when clicking on a link
    const mobileNavLinks = document.querySelectorAll('.mobile-nav-link, .mobile-collapsible-content a');
    mobileNavLinks.forEach(link => {
      link.addEventListener('click', () => {
        closeMobileMenu();
      });
    });

    // Mobile theme toggle functionality
    const mobileThemeToggle = document.getElementById('mobile-theme-toggle');
    if (mobileThemeToggle) {
      mobileThemeToggle.addEventListener('click', () => {
        document.documentElement.classList.toggle('dark');
      });
    }
  });
</script>

<style>
  /* Smooth transitions for header */
  #college-header {
    transition: transform 0.3s ease, box-shadow 0.3s ease, height 0.3s ease;
  }

  /* Mobile menu backdrop */
  #mobile-backdrop {
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  /* Mobile menu container */
  #mobile-container {
    transform: translateX(100%);
    transition: transform 0.3s ease;
  }

  /* Nav link hover effect */
  .nav-link:hover .nav-indicator {
    transform: scaleX(1);
  }

  /* Apply button hover effect */
  .apply-button:hover span:last-child {
    transform: scaleX(1);
  }

  /* Mobile nav animation */
  .mobile-nav-link,
  .mobile-collapsible-trigger,
  .mobile-collapsible-content a {
    transition: background-color 0.2s ease, transform 0.2s ease;
  }

  .mobile-nav-link:active,
  .mobile-collapsible-trigger:active,
  .mobile-collapsible-content a:active {
    transform: scale(0.98);
  }
</style>
